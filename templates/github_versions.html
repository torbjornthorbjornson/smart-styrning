<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <title>Git-versioner</title>
    <link rel="stylesheet" href="/static/styles.css">
    <style>
        body { padding: 2em; font-family: sans-serif; background: #f0f4f8; }
        h1 { font-size: 2em; margin-bottom: 1em; }
        .tag-container { background: white; padding: 1em; border-radius: 10px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); }
        .tag { padding: 0.5em 0; border-bottom: 1px solid #eee; }
        .tag:last-child { border-bottom: none; }
        .tag-name { font-weight: bold; color: #007acc; }
        .commit-msg { color: #444; margin-top: 0.25em; }
        .date { color: #888; font-size: 0.9em; }
        a.home-link { display: inline-block; margin-top: 2em; color: #007acc; }
    </style>
</head>
<body>
    <h1>üîÑ Git-versioner (Taggar)</h1>
    <div id="tags" class="tag-container">
        <p>Laddar taggar fr√•n GitHub...</p>
    </div>
    <a href="/" class="home-link">‚¨ÖÔ∏è Tillbaka till startsidan</a>

    <script>
        async function loadTags() {
            const container = document.getElementById('tags');
            container.innerHTML = '';
            try {
                const repo = 'torbjornthorbjornson/smart-styrning';
                const tagsRes = await fetch(`https://api.github.com/repos/${repo}/tags`);
                const tags = await tagsRes.json();

                if (!tags.length) {
                    container.innerHTML = '<p>Inga taggar hittades.</p>';
                    return;
                }

                for (const tag of tags) {
                    const commitRes = await fetch(tag.commit.url);
                    const commit = await commitRes.json();

                    const div = document.createElement('div');
                    div.className = 'tag';
                    div.innerHTML = `
                        <div class="tag-name">üè∑Ô∏è ${tag.name}</div>
                        <div class="commit-msg">${commit.commit.message.split('\n')[0]}</div>
                        <div class="date">${new Date(commit.commit.author.date).toLocaleString()}</div>
                    `;
                    container.appendChild(div);
                }
            } catch (err) {
                container.innerHTML = '<p style="color:red;">Kunde inte h√§mta taggar.</p>';
                console.error(err);
            }
        }

        loadTags();
    </script>
</body>
</html>
